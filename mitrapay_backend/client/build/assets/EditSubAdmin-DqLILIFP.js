import{z as v,e as j,r as u,j as s,L as h,q as x,y as n}from"./index-C3nOHlLd.js";function y(){const{id:l}=v(),p=j(),o="rgb(255, 102, 0)",d="#cc5200",b=["Dashboard","User","Create User","View User","Edit User","Money Transfer","Send Money","View Transaction","Multiple Payments"].filter((e,r,t)=>t.indexOf(e)===r),[a,c]=u.useState({Name:"",User_name:"",email:"",Phone:"",Status:"Active",Password:"",role:"Sub_Admin",Pages:[],CreatedBy:"Super_Admin"}),[i,f]=u.useState({});u.useEffect(()=>{(async()=>{try{const t=(await x.get(`/api/auth/edit_subadmin/${l}`,{withCredentials:!0})).data;c({Name:t.Name||"",User_name:t.User_name||"",email:t.email||"",Phone:t.Phone||"",Status:t.Status||"Active",Password:"",role:t.role||"Sub_Admin",Pages:t.Pages||[],CreatedBy:t.CreatedBy||"Super_Admin"})}catch(r){n.error("Failed to fetch subadmin details"),r.response&&r.response.status===401&&(n.error("Unauthorized access. Please log in again."),window.location.reload())}})()},[l]);const m=e=>{c({...a,[e.target.name]:e.target.value})},g=e=>{const r=a.Pages.includes(e)?a.Pages.filter(t=>t!==e):[...a.Pages,e];c({...a,Pages:r})},w=()=>{const e={};return a.Name.trim()||(e.Name="Name is required"),a.User_name.trim()||(e.User_name="Username is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(e.email="Invalid email format"):e.email="Email is required",a.Phone.trim()?/^\d{10}$/.test(a.Phone)||(e.Phone="Phone must be 10 digits"):e.Phone="Phone number is required",a.Password&&a.Password.length<8&&(e.Password="Password must be at least 8 characters"),f(e),Object.keys(e).length>0?(n.error("Please fix the validation errors"),!1):!0},N=async e=>{var r;if(e.preventDefault(),!!w())try{await x.put("/api/auth/update_subadmin",{...a,id:l},{withCredentials:!0}),n.success("Co Admin updated successfully! ðŸŽ‰"),p("/viewCoAdmin")}catch(t){n.error(((r=t.response)==null?void 0:r.data)||"Update failed"),t.response&&t.response.status===401&&(n.error("Unauthorized access. Please log in again."),window.location.reload())}};return s.jsxs("div",{className:"container py-5",children:[s.jsx("div",{className:"rounded-3 shadow-sm mb-4 bg-white",style:{borderBottom:`3px solid ${o}`},children:s.jsxs("header",{className:"d-flex align-items-center justify-content-between px-4 py-3",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(h,{to:"/viewCoAdmin",className:"btn btn-outline-dark rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px",borderColor:"#343a40"},children:s.jsx("i",{className:"fas fa-chevron-left"})}),s.jsxs("h1",{className:"h4 fw-bold mb-0 text-dark",children:["Edit Co-Admin User: ",a.User_name]})]}),s.jsxs(h,{to:"/viewCoAdmin",className:"btn btn-outline-secondary px-4 py-2 fw-semibold rounded-pill",children:[s.jsx("i",{className:"fas fa-list me-2"})," View Co-Admin"]})]})}),s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-lg-10",children:s.jsx("form",{className:"p-5 rounded-4 shadow-2xl",onSubmit:N,style:{backgroundColor:"white",border:"1px solid #eee",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:s.jsxs("div",{className:"row g-4",children:[s.jsx("div",{className:"col-12 mb-4",children:s.jsx("h5",{className:"text-uppercase fw-bold text-muted border-bottom pb-2 mb-3",children:"Login and Contact Information"})}),[{id:"Name",label:"Full Name"},{id:"User_name",label:"Username"},{id:"email",label:"Email Address",type:"email"},{id:"Phone",label:"Phone Number"}].map(({id:e,label:r,type:t="text"})=>s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"form-floating",children:[s.jsx("input",{type:t,name:e,id:e,className:`form-control ${i[e]?"is-invalid":""}`,placeholder:r,value:a[e],onChange:m,style:{borderRadius:"8px",borderColor:"#ddd",height:"56px"}}),s.jsx("label",{htmlFor:e,className:"text-secondary",children:r}),i[e]&&s.jsx("div",{className:"invalid-feedback",children:i[e]})]})},e)),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"form-floating",children:[s.jsx("input",{type:"password",name:"Password",id:"Password",className:`form-control ${i.Password?"is-invalid":""}`,placeholder:"Password (Leave blank to keep current)",value:a.Password,onChange:m,style:{borderRadius:"8px",borderColor:"#ddd",height:"56px"}}),s.jsx("label",{htmlFor:"Password",className:"text-secondary",children:"New Password (Optional)"}),i.Password&&s.jsx("div",{className:"invalid-feedback",children:i.Password})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"form-floating",children:[s.jsxs("select",{name:"Status",id:"Status",className:"form-select",value:a.Status,onChange:m,style:{borderRadius:"8px",borderColor:"#ddd",height:"56px"},children:[s.jsx("option",{value:"Active",children:"Active"}),s.jsx("option",{value:"Inactive",children:"Inactive"})]}),s.jsx("label",{htmlFor:"Status",className:"text-secondary",children:"Account Status"})]})}),s.jsxs("div",{className:"col-12 pt-5",children:[s.jsx("h5",{className:"text-uppercase fw-bold pb-3",style:{color:d,borderBottom:`2px solid ${d}33`},children:"Page Access Permissions"}),s.jsx("div",{className:"row g-2 pt-3",children:b.map(e=>{const r=a.Pages.includes(e);return s.jsx("div",{className:"col-auto",children:s.jsx("div",{className:"px-3 py-2 rounded-pill border fw-medium user-select-none",style:{borderColor:r?o:"#ccc",backgroundColor:r?o:"#f8f9fa",color:r?"white":"#333",cursor:"pointer",transition:"all 0.15s ease-in-out",boxShadow:r?`0 2px 5px ${o}33`:"none"},onClick:()=>g(e),children:e})},e)})})]}),s.jsx("div",{className:"col-12 text-center mt-5",children:s.jsxs("button",{type:"submit",className:"btn btn-lg px-5 py-3 fw-bold rounded-pill",style:{backgroundColor:o,color:"white",boxShadow:`0 10px 30px ${o}66`,transition:"background-color 0.2s, transform 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor=d,onMouseOut:e=>e.currentTarget.style.backgroundColor=o,children:[s.jsx("i",{className:"fas fa-edit me-2"})," Update Co Admin Details"]})})]})})})})]})}export{y as default};
