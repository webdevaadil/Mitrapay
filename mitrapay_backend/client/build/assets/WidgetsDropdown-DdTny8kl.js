import{r as g,_ as B,$ as n,c as k,P as r,o as D,j as e,b as J,e as _,h as E,q as M,y as A}from"./index-S0OVyHNu.js";import{c as m,b as S,a as T}from"./index.esm-LEHn8Q-H.js";import{C as f}from"./index.esm-DJNAl6F1.js";import{a as i,C as N}from"./CRow-DSL1DoSH.js";import{C as v,a as C}from"./CCardBody-CBNdoKh7.js";import{C as w}from"./CCardHeader-B-oarDzT.js";import{c as F,a as W,b as O}from"./cib-twitter-00_H7eLt.js";import{c as H,a as z,b as I,d as K,e as L,f as q}from"./cil-cloud-upload-BrsLrWxE.js";import{F as U}from"./index-BQvgzHxm.js";import{n as V}from"./DefaultLayout-D_FgM0Kl.js";import{C as G,d as Q,b as $,e as b}from"./CTable-BvAUGneY.js";import{C as X}from"./CBadge-kW0wuZL8.js";const h=g.forwardRef((t,s)=>{var{className:x,chart:c,color:u,icon:o,values:d}=t,p=B(t,["className","chart","color","icon","values"]);return n.createElement(v,Object.assign({className:x},p,{ref:s}),n.createElement(w,{className:k("position-relative d-flex justify-content-center align-items-center",{[`bg-${u}`]:u})},o,c),n.createElement(C,{className:"row text-center"},d&&d.map((y,j)=>n.createElement(n.Fragment,{key:j},j%2!==0&&n.createElement("div",{className:"vr"}),n.createElement(i,null,n.createElement("div",{className:"fs-5 fw-semibold"},y.value),n.createElement("div",{className:"text-uppercase text-body-secondary small"},y.title))))))});h.propTypes={chart:r.oneOfType([r.string,r.node]),className:r.string,color:D,icon:r.oneOfType([r.string,r.node]),values:r.arrayOf(r.any)};h.displayName="CWidgetStatsD";const Y=t=>{const s={elements:{line:{tension:.4},point:{radius:0,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}},maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}}};return e.jsxs(N,{className:t.className,xs:{gutter:4},children:[e.jsx(i,{sm:6,xl:4,xxl:3,children:e.jsx(h,{...t.withCharts&&{chart:e.jsx(f,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[65,59,84,84,51,55,40],fill:!0}]},options:s})},icon:e.jsx(m,{icon:F,height:52,className:"my-4 text-white"}),values:[{title:"friends",value:"89K"},{title:"feeds",value:"459"}],style:{"--cui-card-cap-bg":"#3b5998"}})}),e.jsx(i,{sm:6,xl:4,xxl:3,children:e.jsx(h,{...t.withCharts&&{chart:e.jsx(f,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[1,13,9,17,34,41,38],fill:!0}]},options:s})},icon:e.jsx(m,{icon:W,height:52,className:"my-4 text-white"}),values:[{title:"followers",value:"973k"},{title:"tweets",value:"1.792"}],style:{"--cui-card-cap-bg":"#00aced"}})}),e.jsx(i,{sm:6,xl:4,xxl:3,children:e.jsx(h,{...t.withCharts&&{chart:e.jsx(f,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[78,81,80,45,34,12,40],fill:!0}]},options:s})},icon:e.jsx(m,{icon:O,height:52,className:"my-4 text-white"}),values:[{title:"contacts",value:"500"},{title:"feeds",value:"1.292"}],style:{"--cui-card-cap-bg":"#4875b4"}})}),e.jsx(i,{sm:6,xl:4,xxl:3,children:e.jsx(h,{color:"warning",...t.withCharts&&{chart:e.jsx(f,{className:"position-absolute w-100 h-100",type:"line",data:{labels:["January","February","March","April","May","June","July"],datasets:[{backgroundColor:"rgba(255,255,255,.1)",borderColor:"rgba(255,255,255,.55)",pointHoverBackgroundColor:"#fff",borderWidth:2,data:[35,23,56,22,97,23,64],fill:!0}]},options:s})},icon:e.jsx(m,{icon:H,height:52,className:"my-4 text-white"}),values:[{title:"events",value:"12+"},{title:"meetings",value:"4"}]})})]})};Y.propTypes={className:r.string,withCharts:r.bool};const Z=({title:t,value:s,icon:x,color:c,detail:u,trend:o})=>{const d=o==="up"?L:o==="down"?q:null,p=o==="up"?"text-success":o==="down"?"text-danger":"text-muted";return e.jsx(v,{className:`mb-4 border-start border-start-${c} border-start-3 shadow-sm`,style:{borderRadius:"0.75rem"},children:e.jsxs(C,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-body-secondary text-uppercase fw-semibold mb-1 small",children:t}),e.jsx("div",{className:`fs-3 fw-bold mb-0 ${c==="warning"?"text-dark":"text-primary"}`,children:s})]}),e.jsx("div",{className:`bg-${c} bg-opacity-10 text-${c} p-2 rounded-circle`,style:{fontSize:"1.5rem"},children:e.jsx(m,{icon:x,size:"xl"})})]}),e.jsx("hr",{className:"my-2"}),e.jsxs("div",{className:`d-flex align-items-center small ${p}`,children:[d&&e.jsx(m,{icon:d,className:"me-1"}),e.jsx("span",{className:"fw-semibold",children:u})]})]})})},ue=()=>{const{user:t}=J(a=>a.user),[s,x]=g.useState({}),[c,u]=g.useState([]),[o,d]=g.useState([]),p=async()=>{try{const l=(await M.get("/api/auth/dashboard_data",{withCredentials:!0})).data;x(l),l.recentActivity&&u(l.recentActivity),l.pendingApprovals&&d(l.pendingApprovals)}catch(a){A.error("Failed to load dashboard data."),a.response&&a.response.status===401&&(A.error("Session expired. Please log in again."),window.location.reload())}};g.useEffect(()=>{p()},[]);const y=[{title:"Today Balance",value:`₹ ${s.today_balance||0}`,icon:V,color:"primary",detail:`₹ ${s.total_balance||"-"} Total Balance`,trend:s.total_balance||"up",role:"Super_Admin"},{title:"Today's Payment",value:`₹ ${s.today_payout||0}`,icon:z,color:"success",to:"/ViewTransactions",detail:`₹ ${s.total_payout||0} Successful Payments`,trend:s.payoutTrend||"up"},{title:"Today Payment Accounts",value:`${s.today_account||0}`,icon:I,color:"info",detail:`${s.total_account||0} Total Accounts`,trend:s.total_account||"flat"},{title:"Rejected Transactions",value:`₹ ${s.todalrejectedtransaction||0}`,icon:K,color:"warning",detail:s.toatalrejectedtransaction?`₹ ${s.toatalrejectedtransaction} Total Rejected`:"-",trend:s.toatalrejectedtransaction||"down"}],j=_(),P=a=>{j(a)};return e.jsxs(S,{fluid:!0,className:"p-4",children:[e.jsxs(N,{className:"mb-4 align-items-center",children:[e.jsx(i,{xs:6,children:e.jsx("h2",{className:"mb-0 fw-light",children:"Dashboard Overview"})}),e.jsx(i,{xs:6,className:"text-end",children:e.jsxs(T,{color:"primary",className:"fw-semibold shadow-sm",as:E,to:"/MultiplePayments",children:[e.jsx(U,{className:"me-2"}),"New Multiple Payments"]})})]}),e.jsx(N,{children:y.map((a,l)=>e.jsx(i,{xs:12,sm:6,lg:3,onClick:()=>P(a==null?void 0:a.to),children:e.jsx(Z,{...a})},l))}),t.role=="aadil"&&e.jsxs(N,{className:"mt-4",children:[e.jsx(i,{xs:12,lg:7,className:"mb-4",children:e.jsxs(v,{className:"shadow-lg border-0",style:{borderRadius:"0.75rem"},children:[e.jsx(w,{className:"fw-bold bg-light border-bottom",children:"Recent File Activity"}),e.jsx(C,{className:"p-0",children:e.jsx(G,{hover:!0,responsive:!0,className:"mb-0 align-middle",children:e.jsx(Q,{children:c.length>0?c.map((a,l)=>{const R=a.status==="Processed"?"success":a.status==="Pending"?"warning":"danger";return e.jsxs($,{children:[e.jsx(b,{className:"fw-semibold",children:a.filename}),e.jsx(b,{children:e.jsx(X,{color:R,shape:"rounded-pill",className:"px-3 fw-normal",children:a.status})}),e.jsx(b,{className:"text-end fw-semibold",children:a.amount}),e.jsx(b,{className:"text-end text-muted small",children:a.date})]},l)}):e.jsx($,{children:e.jsx(b,{colSpan:"4",className:"text-center py-4 text-muted",children:"No recent activity available."})})})})})]})}),e.jsx(i,{xs:12,lg:5,className:"mb-4",children:e.jsxs(v,{className:"shadow-lg border-0",style:{borderRadius:"0.75rem"},children:[e.jsxs(w,{className:"fw-bold bg-light border-bottom text-warning",children:["Pending Approvals (",o.length,")"]}),e.jsx(C,{className:"p-3",children:o.length>0?e.jsx("ul",{className:"list-unstyled mb-0",children:o.map((a,l)=>e.jsxs("li",{className:"d-flex align-items-start mb-3 pb-2 border-bottom",children:[e.jsx(m,{className:"me-3 mt-1 text-warning",size:"lg"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:a.type}),e.jsx("div",{className:"small text-muted",children:a.detail}),e.jsxs("div",{className:"small",children:[a.user," • ",a.date]})]}),e.jsx(T,{color:"primary",size:"sm",className:"ms-auto",href:"/approvals",children:"Review"})]},l))}):e.jsx("p",{className:"text-center text-muted m-4",children:"✅ All clear!"})})]})})]})]})};export{ue as D,Y as W};
