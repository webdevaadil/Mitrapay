import{z as U,e as C,b as k,r as d,j as e,L as p,q as b,y as l}from"./index-S0OVyHNu.js";function E(){const{id:c}=U(),f=C(),{user:g}=k(s=>s.user),i="rgb(255, 102, 178)",m="#cc4a92",N=["Dashboard","Send Money","View Transaction","Multiple Payments"],[a,u]=d.useState({Name:"",User_name:"",email:"",Phone:"",Status:"Active",role:"User",Pages:[],Subadmin:""}),[h,j]=d.useState({}),[v,y]=d.useState("");d.useEffect(()=>{(async()=>{var r,t;try{const o=(await b.get(`/api/auth/Edit_user/${c}`,{withCredentials:!0})).data;u({Name:o.Name||"",User_name:o.User_name||"",email:o.email||"",Phone:o.Phone||"",Status:o.status||"Active",role:o.role||"User",Pages:o.Pages||[],Subadmin:((r=o.Subadmin)==null?void 0:r._id)||o.Subadmin||""}),y(((t=o.Subadmin)==null?void 0:t.Name)||"Unknown")}catch(n){l.error("Failed to load user data"),n.response&&n.response.status===401&&(l.error("Unauthorized access. Please log in again."),window.location.reload())}})()},[c,g]);const x=s=>{const{name:r,value:t}=s.target;u({...a,[r]:t})},w=s=>{const r=a.Pages.includes(s)?a.Pages.filter(t=>t!==s):[...a.Pages,s];u({...a,Pages:r})},S=()=>{const s={};return a.Name.trim()||(s.Name="Name is required"),a.User_name.trim()||(s.User_name="Username is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(s.email="Invalid email format"):s.email="Email is required",a.Phone.trim()?/^\d{10}$/.test(a.Phone)||(s.Phone="Phone must be 10 digits"):s.Phone="Phone number is required",j(s),Object.keys(s).length===0},P=async s=>{var t;if(s.preventDefault(),!S()){l.error("Please fix the validation errors");return}const r={...a,id:c};try{await b.put("/api/auth/Update_user",r,{withCredentials:!0}),l.success("User updated successfully! ðŸŽ‰"),f("/viewUser")}catch(n){l.error(((t=n.response)==null?void 0:t.data)||"Update failed"),n.response&&n.response.status===401&&(l.error("Unauthorized access. Please log in again."),window.location.reload())}};return e.jsxs("div",{className:"container py-5",children:[e.jsx("div",{className:"rounded-3 shadow-sm mb-4 bg-white",style:{borderBottom:`3px solid ${i}`},children:e.jsxs("header",{className:"d-flex align-items-center justify-content-between px-4 py-3",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(p,{to:"/viewUser",className:"btn btn-outline-dark rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px",borderColor:"#343a40"},children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsxs("h1",{className:"h4 fw-bold mb-0 text-dark",children:["Edit User: ",a.User_name]})]}),e.jsxs(p,{to:"/viewUser",className:"btn btn-outline-secondary px-4 py-2 fw-semibold rounded-pill",children:[e.jsx("i",{className:"fas fa-list me-2"})," View All Users"]})]})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-lg-10",children:e.jsx("form",{className:"p-5 rounded-4 shadow-2xl",onSubmit:P,style:{backgroundColor:"white",border:"1px solid #eee",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-12 mb-4",children:e.jsx("h5",{className:"text-uppercase fw-bold text-muted border-bottom pb-2 mb-3",children:"User Details"})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("p",{className:"form-control",style:{borderRadius:"8px",borderColor:"#ddd",height:"56px",paddingTop:"1.625rem",paddingBottom:"0.625rem"},children:v}),e.jsx("label",{htmlFor:"Subadmin",className:"text-secondary",children:"Managed By (Subadmin)"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{name:"Status",id:"Status",className:"form-select",value:a.Status,onChange:x,style:{borderRadius:"8px",borderColor:"#ddd",height:"56px"},children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"})]}),e.jsx("label",{htmlFor:"Status",className:"text-secondary",children:"Status"})]})}),[{id:"Name",label:"Full Name"},{id:"User_name",label:"Username"},{id:"email",label:"Email Address",type:"email"},{id:"Phone",label:"Phone Number"}].map(({id:s,label:r,type:t="text"})=>e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:t,name:s,id:s,className:`form-control ${h[s]?"is-invalid":""}`,placeholder:r,value:a[s],onChange:x,style:{borderRadius:"8px",borderColor:"#ddd",height:"56px"}}),e.jsx("label",{htmlFor:s,className:"text-secondary",children:r}),h[s]&&e.jsx("div",{className:"invalid-feedback",children:h[s]})]})},s)),e.jsxs("div",{className:"col-12 pt-5",children:[e.jsx("h5",{className:"text-uppercase fw-bold pb-3",style:{color:m,borderBottom:`2px solid ${m}33`},children:"Page Access Permissions"}),e.jsx("div",{className:"row g-2 pt-3",children:N.map(s=>{const r=a.Pages.includes(s);return e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"px-3 py-2 rounded-pill border fw-medium user-select-none",style:{borderColor:r?i:"#ccc",backgroundColor:r?i:"#f8f9fa",color:r?"white":"#333",cursor:"pointer",transition:"all 0.15s ease-in-out",boxShadow:r?`0 2px 5px ${i}33`:"none"},onClick:()=>w(s),children:s})},s)})})]}),e.jsx("div",{className:"col-12 text-center mt-5",children:e.jsxs("button",{type:"submit",className:"btn btn-lg px-5 py-3 fw-bold rounded-pill",style:{backgroundColor:i,color:"white",boxShadow:`0 10px 30px ${i}66`,transition:"background-color 0.2s, transform 0.2s"},onMouseOver:s=>s.currentTarget.style.backgroundColor=m,onMouseOut:s=>s.currentTarget.style.backgroundColor=i,children:[e.jsx("i",{className:"fas fa-edit me-2"})," Update User Details"]})})]})})})})]})}export{E as default};
