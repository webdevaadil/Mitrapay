import{e as h,r as l,j as a,L as N,q as p,y as t}from"./index-S0OVyHNu.js";function g(){h();const[i,o]=l.useState({beneficiaryCode:"",beneficiaryName:"",beneficiaryAddress:"",ifsc:"",bankName:"",paymentMethod:"",effectiveFrom:"",beneficiaryaccountNumber:""}),[c,m]=l.useState({}),f=e=>{const{name:s,value:n,type:r,checked:u}=e.target;o(r==="checkbox"?d=>({...d,[s]:u}):d=>({...d,[s]:n}))},b=()=>{const e={};return i.beneficiaryCode.trim()!==i.beneficiaryName.trim()&&(e.beneficiaryCode="Beneficiary Name and Code should be same."),i.beneficiaryCode.trim()||(e.beneficiaryCode="beneficiary Code is required"),i.beneficiaryName.trim()||(e.beneficiaryName="beneficiary Name is required"),i.beneficiaryaccountNumber.trim()||(e.beneficiaryaccountNumber="beneficiary Account is required"),i.ifsc.trim()||(e.ifsc="beneficiary Ifsc is required"),i.bankName.trim()||(e.bankName="beneficiary bankName is required"),i.paymentMethod.trim()||(e.paymentMethod="beneficiary paymentMethod is required"),m(e),Object.keys(e).length===0},y=async e=>{var s,n;if(e.preventDefault(),b())try{const r=await p.post("/api/auth/Create_account",i);r.status===200||r.status===201?(t.success("Account created successfully!"),o({beneficiaryCode:"",beneficiaryName:"",beneficiaryAddress:"",ifsc:"",bankName:"",paymentMethod:"",effectiveFrom:"",beneficiaryaccountNumber:""})):t.error("Failed to create account. Please try again.")}catch(r){console.error("API error:",r),r.response&&r.response.status===401&&(t.error("Unauthorized access. Please log in again."),window.location.reload()),t.error(((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.message)||"Something went wrong with the API.")}else t.error("Please fix the errors in the form.")};return console.log(c),a.jsxs("div",{className:"container py-4",children:[a.jsx("div",{className:"rounded shadow-sm mb-3",children:a.jsxs("header",{className:"d-flex align-items-center justify-content-between px-3 py-3 border-bottom",children:[a.jsx(N,{to:"/BeneficiaryAccount",className:"btn btn-light rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",border:"1px solid #dee2e6"},children:a.jsx("i",{className:"fas fa-arrow-left fs-5 text-dark"})}),a.jsx("h1",{className:"h5 fw-bold flex-grow-1 ms-2 mb-0 text-dark",children:"Add Beneficiary"}),a.jsx("button",{onClick:y,className:"btn btn-primary px-4 py-2 shadow-sm",children:"Save"})]})}),a.jsx("form",{className:"px-5 py-4 rounded border shadow-sm",children:a.jsx("div",{className:"row g-4",children:[{id:"beneficiaryCode",label:"Beneficiary Code"},{id:"beneficiaryName",label:"Beneficiary Name",type:"email"},{id:"beneficiaryAddress",label:"Beneficiary Address"},{id:"beneficiaryaccountNumber",label:"Beneficiary Account Number"},{id:"ifsc",label:"IFSC"},{id:"bankName",label:"Bank Name"},{id:"paymentMethod",label:"Payment Method"},{id:"effectiveFrom",label:"Effective From"}].map(({id:e,label:s,type:n="text"})=>a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:s}),a.jsx("input",{type:n,name:e,className:`form-control ${c[e]?"is-invalid":""}`,value:i[e],onChange:f}),c[e]&&a.jsx("div",{className:"invalid-feedback",children:c[e]})]},e))})})]})}export{g as default};
